# 概要设计规约





## 1. 原型设计

### 1.1 初始界面



![pic1](img/pic1.png)



### 1.2 点击function界面 



#### 1.2.1 点击function

![pic2](img/pic2.png)



#### 1.2.2 出现新的变量

![pic3](img/pic3.png)



### 1.3 单击变量出现概要数据

单击左栏的value 3

![pic4](img/pic4.png)



### 1.4 单击diagram选项查看图表

![pic5](img/pic5.png)





## 2. 业务构架





## 3. 技术架构

![pic7](img/pic7.png)

上图为我们本次项目所用到的技术架构图。我们的整个项目可以被分为三个层，分别为UI层、应用层和数据分析层。下面部分是对三个层的一个详细说明。

**UI层**

UI层的主要作用是实现与用户之间的交互，为用户展示数据。

**应用层**

应用层的主要作用是实现数据的？...

**数据分析层**

数据分析层的主要作用是实现对用户提供的数据进行分析处理，并且将分析的结果返回给应用层。

## 4.部署结构

![pic6](img/pic6.png)

上图展示了我们整个项目的部署架构。出于利于部署和高可用性的考虑，我们将实现数据分析的R语言环境部署在了centos 6 环境当中；同时，我们也将自己实现的后端部分部署在了与R语言相同的环境当中。这样做的好处在于能够减少两者之间的网络通信的带来的延迟现象。

对于前端部分，我们开放了其环境中的80端口，并且部署在了阿里云的一个centos 6 环境当中，用户可以利用ip和port访问我们的主页面。

具体的物理环境如下：

**R语言环境&后端环境**

- OS：CentOS 6.4 version
- CPU：2.7 GHz Intel Core i5
- RAM：4GB

**前端环境**

- OS：CentOS 6.4 version
- CPU：2.7 GHz Intel Core i5
- RAM：4GB

## 5. 数据建模



## 6. 接口规约

该部分我们将对我们的子系统之间的接口进行详细的说明。

---
### *create/xml?name={test}*   

#### 接口描述

此接口通过get方法请求生成名字为 test 的xml文件：test.xml

|                |              |
| -------------- | ------------ |
| Request Method | Get          |
| Authorization  | Not Required |

#### 请求参数

| Name | Located in | Description                            |   Required    | Schema |
| :--: | :--------: | :------------------------------------- | :-----------: | :----- |
| name |   url的参数   | 放在GET请求中最为参数传入后端，生成对应的{test}-ddi.xml文件 | 否（默认名字为 test） | String |

#### 返回结果

| Code               | Description  | Schema |
| :----------------- | :----------- | :----- |
| success            | 表示生成文件成功     | String |
| file already exist | 文件已经存在       | String |
| no such a file     | 对应的.tab文件不存在 | String |

#### 实例请求

localhost:8080/create/xml?name=hello

#### 实例结果

success

------

### *create/prep?name={test}*

#### 接口描述

此接口通过get方法请求生成名字为 test 的prep文件：test.prep

|                |              |
| -------------- | ------------ |
| Request Method | Get          |
| Authorization  | Not Required |

#### 请求参数

| Name | Located in | Description                         |   Required    | Schema |
| :--: | :--------: | :---------------------------------- | :-----------: | :----- |
| name |   url的参数   | 放在GET请求中最为参数传入后端，生成对应的{test}.prep文件 | 否（默认名字为 test） | String |

#### 返回结果

| Code             | Description                   | Schema |
| :--------------- | :---------------------------- | :----- |
| success          | 表示生成文件成功                      | String |
| unexpected error | 如果解析tab文件出现问题（没有对应文件或者文件内容有误） | String |
| no such a file   | 对应的.tab文件不存在                  | String |

#### 实例请求

localhost:8080/create/prep?name=hello

#### 实例结果

success

------

### *download/xml?name={test}*

#### 接口描述

此接口通过get方法下载名字为 test 的xml文件：test-ddi.xml。若没有此文件则返回文件大小为0

|                |              |
| -------------- | ------------ |
| Request Method | Get          |
| Authorization  | Not Required |

#### 请求参数

| Name | Located in | Description                 |   Required    | Schema |
| :--: | :--------: | :-------------------------- | :-----------: | :----- |
| name |   url的参数   | 放在GET请求中最为参数传入后端，下载对应的xml文件 | 否（默认名字为 test） | String |

#### 返回结果

| Code | Description                              | Schema |
| :--- | :--------------------------------------- | :----- |
| 下载窗口 | 此动作描述了一次完整的文件下载动作，既可以单独输入url进行文件下载，其本身也作为tworavens运行时的get请求被写在了app_ddi.js里 | null   |

#### 实例请求

localhost:8080/create/xml?name=hello

#### 实例结果

浏览器用户可以进行提示下载

------

### *download/prep?name={test}*

#### 接口描述

此接口通过get方法下载名字为 test 的xml文件：test.prep。若没有此文件则返回文件大小为0

|                |              |
| -------------- | ------------ |
| Request Method | Get          |
| Authorization  | Not Required |

#### 请求参数

| Name | Located in | Description                  |   Required    | Schema |
| :--: | :--------: | :--------------------------- | :-----------: | :----- |
| name |   url的参数   | 放在GET请求中最为参数传入后端，下载对应的prep文件 | 否（默认名字为 test） | String |

#### 返回结果

| Code | Description                              | Schema |
| :--- | :--------------------------------------- | :----- |
| 下载窗口 | 此动作描述了一次完整的文件下载动作，既可以单独输入url进行文件下载，其本身也作为tworavens运行时的get请求被写在了app_ddi.js里 | null   |

#### 实例请求

localhost:8080/create/prep?name=test

#### 实例结果

浏览器用户可以进行提示下载

------

### *download/tab?name={test}*

#### 接口描述

此接口通过get方法下载名字为 test 的xml文件：test.tab。若没有此文件则返回文件大小为0

|                |              |
| -------------- | ------------ |
| Request Method | Get          |
| Authorization  | Not Required |

#### 请求参数

| Name | Located in | Description                 |   Required    | Schema |
| :--: | :--------: | :-------------------------- | :-----------: | :----- |
| name |   url的参数   | 放在GET请求中最为参数传入后端，下载对应的tab文件 | 否（默认名字为 test） | String |

#### 返回结果

| Code | Description                              | Schema |
| :--- | :--------------------------------------- | :----- |
| 下载窗口 | 此动作描述了一次完整的文件下载动作，既可以单独输入url进行文件下载，其本身也作为tworavens运行时的get请求被写在了app_ddi.js里 | null   |

#### 实例请求

localhost:8080/create/tab?name=test

#### 实例结果

浏览器用户可以进行提示下载